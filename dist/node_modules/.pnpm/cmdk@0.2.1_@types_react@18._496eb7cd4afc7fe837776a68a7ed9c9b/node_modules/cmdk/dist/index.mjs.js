import{a as e}from"./chunk-XJATAMEX.mjs.js";import{Root as t,Portal as r,Overlay as n,Content as l}from"../../../../@radix-ui_react-dialog@1.0._18ca84f20a13edc1cf9addd39f45a1b8/node_modules/@radix-ui/react-dialog/dist/index.module.js";import*as a from"react";var u='[cmdk-group=""]',i='[cmdk-group-items=""]',o='[cmdk-item=""]',c=`${o}:not([aria-disabled="true"])`,d="cmdk-item-select",s="data-value",f=(t,r)=>e(t,r),m=a.createContext(void 0),v=()=>a.useContext(m),p=a.createContext(void 0),g=()=>a.useContext(p),h=a.createContext(void 0),b=a.forwardRef((e,t)=>{let r=a.useRef(null),n=$(()=>{var t,r,n;return{search:"",value:null!=(n=null!=(r=e.value)?r:null==(t=e.defaultValue)?void 0:t.toLowerCase())?n:"",filtered:{count:0,items:new Map,groups:new Set}}}),l=$(()=>new Set),v=$(()=>new Map),g=$(()=>new Map),h=$(()=>new Set),b=L(e),{label:E,children:w,value:C,onValueChange:y,filter:S,shouldFilter:k,vimBindings:R=!0,...x}=e,I=a.useId(),F=a.useId(),K=a.useId(),O=j();D(()=>{if(void 0!==C){let e=C.trim().toLowerCase();n.current.value=e,O(6,X),V.emit()}},[C]);let V=a.useMemo(()=>({subscribe:e=>(h.current.add(e),()=>h.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var l,a,u;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)H(),_(),O(1,G);else if("value"===e){if(void 0!==(null==(l=b.current)?void 0:l.value)){let e=null!=t?t:"";return void(null==(u=(a=b.current).onValueChange)||u.call(a,e))}r||O(5,X)}V.emit()}},emit:()=>{h.current.forEach(e=>e())}}),[]),z=a.useMemo(()=>({value:(e,t)=>{t!==g.current.get(e)&&(g.current.set(e,t),n.current.filtered.items.set(e,N(t)),O(2,()=>{_(),V.emit()}))},item:(e,t)=>(l.current.add(e),t&&(v.current.has(t)?v.current.get(t).add(e):v.current.set(t,new Set([e]))),O(3,()=>{H(),_(),n.current.value||G(),V.emit()}),()=>{g.current.delete(e),l.current.delete(e),n.current.filtered.items.delete(e);let t=B();O(4,()=>{H(),(null==t?void 0:t.getAttribute("id"))===e&&G(),V.emit()})}),group:e=>(v.current.has(e)||v.current.set(e,new Set),()=>{g.current.delete(e),v.current.delete(e)}),filter:()=>b.current.shouldFilter,label:E||e["aria-label"],commandRef:r,listId:I,inputId:K,labelId:F}),[]);function N(e){var t,r;let l=null!=(r=null==(t=b.current)?void 0:t.filter)?r:f;return e?l(e,n.current.search):0}function _(){if(!r.current||!n.current.search||!1===b.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(r=>{let n=v.current.get(r),l=0;n.forEach(t=>{let r=e.get(t);l=Math.max(r,l)}),t.push([r,l])});let l=r.current.querySelector('[cmdk-list-sizer=""]');J().sort((t,r)=>{var n,l;let a=t.getAttribute(s),u=r.getAttribute(s);return(null!=(n=e.get(u))?n:0)-(null!=(l=e.get(a))?l:0)}).forEach(e=>{let t=e.closest(i);t?t.appendChild(e.parentElement===t?e:e.closest(`${i} > *`)):l.appendChild(e.parentElement===l?e:e.closest(`${i} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=r.current.querySelector(`${u}[${s}="${e[0]}"]`);null==t||t.parentElement.appendChild(t)})}function G(){let e=J().find(e=>!e.ariaDisabled),t=null==e?void 0:e.getAttribute(s);V.setState("value",t||void 0)}function H(){if(!n.current.search||!1===b.current.shouldFilter)return void(n.current.filtered.count=l.current.size);n.current.filtered.groups=new Set;let e=0;for(let t of l.current){let r=N(g.current.get(t));n.current.filtered.items.set(t,r),r>0&&e++}for(let[e,t]of v.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=e}function X(){var e,t,r;let n=B();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(u))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function B(){var e;return null==(e=r.current)?void 0:e.querySelector(`${o}[aria-selected="true"]`)}function J(){return Array.from(r.current.querySelectorAll(c))}function T(e){let t=J()[e];t&&V.setState("value",t.getAttribute(s))}function U(e){var t;let r=B(),n=J(),l=n.findIndex(e=>e===r),a=n[l+e];null!=(t=b.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&V.setState("value",a.getAttribute(s))}function W(e){let t,r=B(),n=null==r?void 0:r.closest(u);for(;n&&!t;)n=e>0?A(n,u):M(n,u),t=null==n?void 0:n.querySelector(c);t?V.setState("value",t.getAttribute(s)):U(e)}let Q=()=>T(J().length-1),Y=e=>{e.preventDefault(),e.metaKey?Q():e.altKey?W(1):U(1)},Z=e=>{e.preventDefault(),e.metaKey?T(0):e.altKey?W(-1):U(-1)};return a.createElement("div",{ref:q([r,t]),...x,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=x.onKeyDown)||t.call(x,e),!e.defaultPrevented)switch(e.key){case"n":case"j":R&&e.ctrlKey&&Y(e);break;case"ArrowDown":Y(e);break;case"p":case"k":R&&e.ctrlKey&&Z(e);break;case"ArrowUp":Z(e);break;case"Home":e.preventDefault(),T(0);break;case"End":e.preventDefault(),Q();break;case"Enter":if(!e.nativeEvent.isComposing){e.preventDefault();let t=B();if(t){let e=new Event(d);t.dispatchEvent(e)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:z.inputId,id:z.labelId,style:P},E),a.createElement(p.Provider,{value:V},a.createElement(m.Provider,{value:z},w)))}),E=a.forwardRef((e,t)=>{var r,n;let l=a.useId(),u=a.useRef(null),i=a.useContext(h),o=v(),c=L(e),s=null!=(n=null==(r=c.current)?void 0:r.forceMount)?n:null==i?void 0:i.forceMount;D(()=>o.item(l,null==i?void 0:i.id),[]);let f=K(l,u,[e.value,e.children,u]),m=g(),p=F(e=>e.value&&e.value===f.current),b=F(e=>!(!s&&!1!==o.filter())||(!e.search||e.filtered.items.get(l)>0));function E(){var e,t;w(),null==(t=(e=c.current).onSelect)||t.call(e,f.current)}function w(){m.setState("value",f.current,!0)}if(a.useEffect(()=>{let t=u.current;if(t&&!e.disabled)return t.addEventListener(d,E),()=>t.removeEventListener(d,E)},[b,e.onSelect,e.disabled]),!b)return null;let{disabled:C,value:y,onSelect:S,forceMount:k,...R}=e;return a.createElement("div",{ref:q([u,t]),...R,id:l,"cmdk-item":"",role:"option","aria-disabled":C||void 0,"aria-selected":p||void 0,"data-disabled":C||void 0,"data-selected":p||void 0,onPointerMove:C?void 0:w,onClick:C?void 0:E},e.children)}),w=a.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:l,...u}=e,i=a.useId(),o=a.useRef(null),c=a.useRef(null),d=a.useId(),s=v(),f=F(e=>!(!l&&!1!==s.filter())||(!e.search||e.filtered.groups.has(i)));D(()=>s.group(i),[]),K(i,o,[e.value,e.heading,c]);let m=a.useMemo(()=>({id:i,forceMount:l}),[l]),p=a.createElement(h.Provider,{value:m},n);return a.createElement("div",{ref:q([o,t]),...u,"cmdk-group":"",role:"presentation",hidden:!f||void 0},r&&a.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},p))}),C=a.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,l=a.useRef(null),u=F(e=>!e.search);return r||u?a.createElement("div",{ref:q([l,t]),...n,"cmdk-separator":"",role:"separator"}):null}),y=a.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,l=null!=e.value,u=g(),i=F(e=>e.search),c=F(e=>e.value),d=v(),f=a.useMemo(()=>{var e;let t=null==(e=d.commandRef.current)?void 0:e.querySelector(`${o}[${s}="${c}"]`);return null==t?void 0:t.getAttribute("id")},[c,d.commandRef]);return a.useEffect(()=>{null!=e.value&&u.setState("search",e.value)},[e.value]),a.createElement("input",{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":f,id:d.inputId,type:"text",value:l?e.value:i,onChange:e=>{l||u.setState("search",e.target.value),null==r||r(e.target.value)}})}),S=a.forwardRef((e,t)=>{let{children:r,...n}=e,l=a.useRef(null),u=a.useRef(null),i=v();return a.useEffect(()=>{if(u.current&&l.current){let e,t=u.current,r=l.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),a.createElement("div",{ref:q([l,t]),...n,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:i.listId,"aria-labelledby":i.inputId},a.createElement("div",{ref:u,"cmdk-list-sizer":""},r))}),k=a.forwardRef((e,u)=>{let{open:i,onOpenChange:o,overlayClassName:c,contentClassName:d,container:s,...f}=e;return a.createElement(t,{open:i,onOpenChange:o},a.createElement(r,{container:s},a.createElement(n,{"cmdk-overlay":"",className:c}),a.createElement(l,{"aria-label":e.label,"cmdk-dialog":"",className:d},a.createElement(b,{ref:u,...f}))))}),R=a.forwardRef((e,t)=>{let r=a.useRef(!0),n=F(e=>0===e.filtered.count);return a.useEffect(()=>{r.current=!1},[]),r.current||!n?null:a.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),x=a.forwardRef((e,t)=>{let{progress:r,children:n,...l}=e;return a.createElement("div",{ref:t,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},a.createElement("div",{"aria-hidden":!0},n))}),I=Object.assign(b,{List:S,Item:E,Input:y,Group:w,Separator:C,Dialog:k,Empty:R,Loading:x});function A(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function M(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function L(e){let t=a.useRef(e);return D(()=>{t.current=e}),t}var D="undefined"==typeof window?a.useEffect:a.useLayoutEffect;function $(e){let t=a.useRef();return void 0===t.current&&(t.current=e()),t}function q(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function F(e){let t=g(),r=()=>e(t.snapshot());return a.useSyncExternalStore(t.subscribe,r,r)}function K(e,t,r){let n=a.useRef(),l=v();return D(()=>{var a;let u=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim().toLowerCase();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim().toLowerCase():n.current}})();l.value(e,u),null==(a=t.current)||a.setAttribute(s,u),n.current=u}),n}var j=()=>{let[e,t]=a.useState(),r=$(()=>new Map);return D(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}},P={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{I as Command,k as CommandDialog,R as CommandEmpty,w as CommandGroup,y as CommandInput,E as CommandItem,S as CommandList,x as CommandLoading,b as CommandRoot,C as CommandSeparator,F as useCommandState};
//# sourceMappingURL=index.mjs.js.map
