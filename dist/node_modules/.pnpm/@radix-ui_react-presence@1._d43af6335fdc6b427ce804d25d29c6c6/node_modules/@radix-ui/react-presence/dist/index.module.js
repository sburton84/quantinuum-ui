import{Children as e,cloneElement as n,useState as t,useRef as r,useEffect as o,useCallback as u,useReducer as i}from"react";import{flushSync as s}from"react-dom";import{useComposedRefs as a}from"../../../../../@radix-ui_react-compose-refs@1.0.0_react@18.3.1/node_modules/@radix-ui/react-compose-refs/dist/index.module.js";import{useLayoutEffect as d}from"../../../../../@radix-ui_react-use-layout-effect@1.0.0_react@18.3.1/node_modules/@radix-ui/react-use-layout-effect/dist/index.module.js";const c=c=>{const{present:f,children:l}=c,N=function(e){const[n,a]=t(),c=r({}),f=r(e),l=r("none"),N=e?"mounted":"unmounted",[p,O]=function(e,n){return i((e,t)=>{const r=n[e][t];return null!=r?r:e},e)}(N,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o(()=>{const e=m(c.current);l.current="mounted"===p?e:"none"},[p]),d(()=>{const n=c.current,t=f.current;if(t!==e){const r=l.current,o=m(n);if(e)O("MOUNT");else if("none"===o||"none"===(null==n?void 0:n.display))O("UNMOUNT");else{O(t&&r!==o?"ANIMATION_OUT":"UNMOUNT")}f.current=e}},[e,O]),d(()=>{if(n){const e=e=>{const t=m(c.current).includes(e.animationName);e.target===n&&t&&s(()=>O("ANIMATION_END"))},t=e=>{e.target===n&&(l.current=m(c.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}O("ANIMATION_END")},[n,O]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:u(e=>{e&&(c.current=getComputedStyle(e)),a(e)},[])}}(f),p="function"==typeof l?l({present:N.isPresent}):e.only(l),O=a(N.ref,p.ref);return"function"==typeof l||N.isPresent?n(p,{ref:O}):null};function m(e){return(null==e?void 0:e.animationName)||"none"}c.displayName="Presence";export{c as Presence};
//# sourceMappingURL=index.module.js.map
