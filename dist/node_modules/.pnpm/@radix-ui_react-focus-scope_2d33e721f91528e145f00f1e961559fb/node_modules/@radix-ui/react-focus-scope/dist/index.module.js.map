{"version":3,"file":"index.module.js","sources":["../../../../../../../../node_modules/.pnpm/@radix-ui+react-focus-scope_2d33e721f91528e145f00f1e961559fb/node_modules/@radix-ui/react-focus-scope/dist/index.module.js"],"sourcesContent":["import $45QHv$babelruntimehelpersesmextends from \"@babel/runtime/helpers/esm/extends\";\nimport {forwardRef as $45QHv$forwardRef, useState as $45QHv$useState, useRef as $45QHv$useRef, useEffect as $45QHv$useEffect, useCallback as $45QHv$useCallback, createElement as $45QHv$createElement} from \"react\";\nimport {useComposedRefs as $45QHv$useComposedRefs} from \"@radix-ui/react-compose-refs\";\nimport {Primitive as $45QHv$Primitive} from \"@radix-ui/react-primitive\";\nimport {useCallbackRef as $45QHv$useCallbackRef} from \"@radix-ui/react-use-callback-ref\";\n\n\n\n\n\n\nconst $d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT = 'focusScope.autoFocusOnMount';\nconst $d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT = 'focusScope.autoFocusOnUnmount';\nconst $d3863c46a17e8a28$var$EVENT_OPTIONS = {\n    bubbles: false,\n    cancelable: true\n};\n/* -------------------------------------------------------------------------------------------------\n * FocusScope\n * -----------------------------------------------------------------------------------------------*/ const $d3863c46a17e8a28$var$FOCUS_SCOPE_NAME = 'FocusScope';\nconst $d3863c46a17e8a28$export$20e40289641fbbb6 = /*#__PURE__*/ $45QHv$forwardRef((props, forwardedRef)=>{\n    const { loop: loop = false , trapped: trapped = false , onMountAutoFocus: onMountAutoFocusProp , onUnmountAutoFocus: onUnmountAutoFocusProp , ...scopeProps } = props;\n    const [container1, setContainer] = $45QHv$useState(null);\n    const onMountAutoFocus = $45QHv$useCallbackRef(onMountAutoFocusProp);\n    const onUnmountAutoFocus = $45QHv$useCallbackRef(onUnmountAutoFocusProp);\n    const lastFocusedElementRef = $45QHv$useRef(null);\n    const composedRefs = $45QHv$useComposedRefs(forwardedRef, (node)=>setContainer(node)\n    );\n    const focusScope = $45QHv$useRef({\n        paused: false,\n        pause () {\n            this.paused = true;\n        },\n        resume () {\n            this.paused = false;\n        }\n    }).current; // Takes care of trapping focus if focus is moved outside programmatically for example\n    $45QHv$useEffect(()=>{\n        if (trapped) {\n            function handleFocusIn(event) {\n                if (focusScope.paused || !container1) return;\n                const target = event.target;\n                if (container1.contains(target)) lastFocusedElementRef.current = target;\n                else $d3863c46a17e8a28$var$focus(lastFocusedElementRef.current, {\n                    select: true\n                });\n            }\n            function handleFocusOut(event) {\n                if (focusScope.paused || !container1) return;\n                if (!container1.contains(event.relatedTarget)) $d3863c46a17e8a28$var$focus(lastFocusedElementRef.current, {\n                    select: true\n                });\n            }\n            document.addEventListener('focusin', handleFocusIn);\n            document.addEventListener('focusout', handleFocusOut);\n            return ()=>{\n                document.removeEventListener('focusin', handleFocusIn);\n                document.removeEventListener('focusout', handleFocusOut);\n            };\n        }\n    }, [\n        trapped,\n        container1,\n        focusScope.paused\n    ]);\n    $45QHv$useEffect(()=>{\n        if (container1) {\n            $d3863c46a17e8a28$var$focusScopesStack.add(focusScope);\n            const previouslyFocusedElement = document.activeElement;\n            const hasFocusedCandidate = container1.contains(previouslyFocusedElement);\n            if (!hasFocusedCandidate) {\n                const mountEvent = new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT, $d3863c46a17e8a28$var$EVENT_OPTIONS);\n                container1.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT, onMountAutoFocus);\n                container1.dispatchEvent(mountEvent);\n                if (!mountEvent.defaultPrevented) {\n                    $d3863c46a17e8a28$var$focusFirst($d3863c46a17e8a28$var$removeLinks($d3863c46a17e8a28$var$getTabbableCandidates(container1)), {\n                        select: true\n                    });\n                    if (document.activeElement === previouslyFocusedElement) $d3863c46a17e8a28$var$focus(container1);\n                }\n            }\n            return ()=>{\n                container1.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT, onMountAutoFocus); // We hit a react bug (fixed in v17) with focusing in unmount.\n                // We need to delay the focus a little to get around it for now.\n                // See: https://github.com/facebook/react/issues/17894\n                setTimeout(()=>{\n                    const unmountEvent = new CustomEvent($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT, $d3863c46a17e8a28$var$EVENT_OPTIONS);\n                    container1.addEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT, onUnmountAutoFocus);\n                    container1.dispatchEvent(unmountEvent);\n                    if (!unmountEvent.defaultPrevented) $d3863c46a17e8a28$var$focus(previouslyFocusedElement !== null && previouslyFocusedElement !== void 0 ? previouslyFocusedElement : document.body, {\n                        select: true\n                    });\n                     // we need to remove the listener after we `dispatchEvent`\n                    container1.removeEventListener($d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT, onUnmountAutoFocus);\n                    $d3863c46a17e8a28$var$focusScopesStack.remove(focusScope);\n                }, 0);\n            };\n        }\n    }, [\n        container1,\n        onMountAutoFocus,\n        onUnmountAutoFocus,\n        focusScope\n    ]); // Takes care of looping focus (when tabbing whilst at the edges)\n    const handleKeyDown = $45QHv$useCallback((event)=>{\n        if (!loop && !trapped) return;\n        if (focusScope.paused) return;\n        const isTabKey = event.key === 'Tab' && !event.altKey && !event.ctrlKey && !event.metaKey;\n        const focusedElement = document.activeElement;\n        if (isTabKey && focusedElement) {\n            const container = event.currentTarget;\n            const [first, last] = $d3863c46a17e8a28$var$getTabbableEdges(container);\n            const hasTabbableElementsInside = first && last; // we can only wrap focus if we have tabbable edges\n            if (!hasTabbableElementsInside) {\n                if (focusedElement === container) event.preventDefault();\n            } else {\n                if (!event.shiftKey && focusedElement === last) {\n                    event.preventDefault();\n                    if (loop) $d3863c46a17e8a28$var$focus(first, {\n                        select: true\n                    });\n                } else if (event.shiftKey && focusedElement === first) {\n                    event.preventDefault();\n                    if (loop) $d3863c46a17e8a28$var$focus(last, {\n                        select: true\n                    });\n                }\n            }\n        }\n    }, [\n        loop,\n        trapped,\n        focusScope.paused\n    ]);\n    return /*#__PURE__*/ $45QHv$createElement($45QHv$Primitive.div, $45QHv$babelruntimehelpersesmextends({\n        tabIndex: -1\n    }, scopeProps, {\n        ref: composedRefs,\n        onKeyDown: handleKeyDown\n    }));\n});\n/*#__PURE__*/ Object.assign($d3863c46a17e8a28$export$20e40289641fbbb6, {\n    displayName: $d3863c46a17e8a28$var$FOCUS_SCOPE_NAME\n});\n/* -------------------------------------------------------------------------------------------------\n * Utils\n * -----------------------------------------------------------------------------------------------*/ /**\n * Attempts focusing the first element in a list of candidates.\n * Stops when focus has actually moved.\n */ function $d3863c46a17e8a28$var$focusFirst(candidates, { select: select = false  } = {}) {\n    const previouslyFocusedElement = document.activeElement;\n    for (const candidate of candidates){\n        $d3863c46a17e8a28$var$focus(candidate, {\n            select: select\n        });\n        if (document.activeElement !== previouslyFocusedElement) return;\n    }\n}\n/**\n * Returns the first and last tabbable elements inside a container.\n */ function $d3863c46a17e8a28$var$getTabbableEdges(container) {\n    const candidates = $d3863c46a17e8a28$var$getTabbableCandidates(container);\n    const first = $d3863c46a17e8a28$var$findVisible(candidates, container);\n    const last = $d3863c46a17e8a28$var$findVisible(candidates.reverse(), container);\n    return [\n        first,\n        last\n    ];\n}\n/**\n * Returns a list of potential tabbable candidates.\n *\n * NOTE: This is only a close approximation. For example it doesn't take into account cases like when\n * elements are not visible. This cannot be worked out easily by just reading a property, but rather\n * necessitate runtime knowledge (computed styles, etc). We deal with these cases separately.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker\n * Credit: https://github.com/discord/focus-layers/blob/master/src/util/wrapFocus.tsx#L1\n */ function $d3863c46a17e8a28$var$getTabbableCandidates(container) {\n    const nodes = [];\n    const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n        acceptNode: (node)=>{\n            const isHiddenInput = node.tagName === 'INPUT' && node.type === 'hidden';\n            if (node.disabled || node.hidden || isHiddenInput) return NodeFilter.FILTER_SKIP; // `.tabIndex` is not the same as the `tabindex` attribute. It works on the\n            // runtime's understanding of tabbability, so this automatically accounts\n            // for any kind of element that could be tabbed to.\n            return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n        }\n    });\n    while(walker.nextNode())nodes.push(walker.currentNode); // we do not take into account the order of nodes with positive `tabIndex` as it\n    // hinders accessibility to have tab order different from visual order.\n    return nodes;\n}\n/**\n * Returns the first visible element in a list.\n * NOTE: Only checks visibility up to the `container`.\n */ function $d3863c46a17e8a28$var$findVisible(elements, container) {\n    for (const element of elements){\n        // we stop checking if it's hidden at the `container` level (excluding)\n        if (!$d3863c46a17e8a28$var$isHidden(element, {\n            upTo: container\n        })) return element;\n    }\n}\nfunction $d3863c46a17e8a28$var$isHidden(node, { upTo: upTo  }) {\n    if (getComputedStyle(node).visibility === 'hidden') return true;\n    while(node){\n        // we stop at `upTo` (excluding it)\n        if (upTo !== undefined && node === upTo) return false;\n        if (getComputedStyle(node).display === 'none') return true;\n        node = node.parentElement;\n    }\n    return false;\n}\nfunction $d3863c46a17e8a28$var$isSelectableInput(element) {\n    return element instanceof HTMLInputElement && 'select' in element;\n}\nfunction $d3863c46a17e8a28$var$focus(element, { select: select = false  } = {}) {\n    // only focus if that element is focusable\n    if (element && element.focus) {\n        const previouslyFocusedElement = document.activeElement; // NOTE: we prevent scrolling on focus, to minimize jarring transitions for users\n        element.focus({\n            preventScroll: true\n        }); // only select if its not the same element, it supports selection and we need to select\n        if (element !== previouslyFocusedElement && $d3863c46a17e8a28$var$isSelectableInput(element) && select) element.select();\n    }\n}\n/* -------------------------------------------------------------------------------------------------\n * FocusScope stack\n * -----------------------------------------------------------------------------------------------*/ const $d3863c46a17e8a28$var$focusScopesStack = $d3863c46a17e8a28$var$createFocusScopesStack();\nfunction $d3863c46a17e8a28$var$createFocusScopesStack() {\n    /** A stack of focus scopes, with the active one at the top */ let stack = [];\n    return {\n        add (focusScope) {\n            // pause the currently active focus scope (at the top of the stack)\n            const activeFocusScope = stack[0];\n            if (focusScope !== activeFocusScope) activeFocusScope === null || activeFocusScope === void 0 || activeFocusScope.pause();\n             // remove in case it already exists (because we'll re-add it at the top of the stack)\n            stack = $d3863c46a17e8a28$var$arrayRemove(stack, focusScope);\n            stack.unshift(focusScope);\n        },\n        remove (focusScope) {\n            var _stack$;\n            stack = $d3863c46a17e8a28$var$arrayRemove(stack, focusScope);\n            (_stack$ = stack[0]) === null || _stack$ === void 0 || _stack$.resume();\n        }\n    };\n}\nfunction $d3863c46a17e8a28$var$arrayRemove(array, item) {\n    const updatedArray = [\n        ...array\n    ];\n    const index = updatedArray.indexOf(item);\n    if (index !== -1) updatedArray.splice(index, 1);\n    return updatedArray;\n}\nfunction $d3863c46a17e8a28$var$removeLinks(items) {\n    return items.filter((item)=>item.tagName !== 'A'\n    );\n}\nconst $d3863c46a17e8a28$export$be92b6f5f03c0fe9 = $d3863c46a17e8a28$export$20e40289641fbbb6;\n\n\n\n\nexport {$d3863c46a17e8a28$export$20e40289641fbbb6 as FocusScope, $d3863c46a17e8a28$export$be92b6f5f03c0fe9 as Root};\n//# sourceMappingURL=index.module.js.map\n"],"names":["$d3863c46a17e8a28$var$AUTOFOCUS_ON_MOUNT","$d3863c46a17e8a28$var$AUTOFOCUS_ON_UNMOUNT","$d3863c46a17e8a28$var$EVENT_OPTIONS","bubbles","cancelable","$d3863c46a17e8a28$export$20e40289641fbbb6","$45QHv$forwardRef","props","forwardedRef","loop","trapped","onMountAutoFocus","onMountAutoFocusProp","onUnmountAutoFocus","onUnmountAutoFocusProp","scopeProps","container1","setContainer","$45QHv$useState","$45QHv$useCallbackRef","lastFocusedElementRef","$45QHv$useRef","composedRefs","$45QHv$useComposedRefs","node","focusScope","paused","pause","this","resume","current","$45QHv$useEffect","handleFocusIn","event","target","contains","$d3863c46a17e8a28$var$focus","select","handleFocusOut","relatedTarget","document","addEventListener","removeEventListener","$d3863c46a17e8a28$var$focusScopesStack","add","previouslyFocusedElement","activeElement","mountEvent","CustomEvent","dispatchEvent","defaultPrevented","candidates","candidate","$d3863c46a17e8a28$var$focusFirst","items","$d3863c46a17e8a28$var$getTabbableCandidates","filter","item","tagName","setTimeout","unmountEvent","body","remove","handleKeyDown","$45QHv$useCallback","isTabKey","key","altKey","ctrlKey","metaKey","focusedElement","container","currentTarget","first","last","$d3863c46a17e8a28$var$findVisible","reverse","$d3863c46a17e8a28$var$getTabbableEdges","shiftKey","preventDefault","$45QHv$createElement","$45QHv$Primitive","div","$45QHv$babelruntimehelpersesmextends","tabIndex","ref","onKeyDown","nodes","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","acceptNode","isHiddenInput","type","disabled","hidden","FILTER_SKIP","FILTER_ACCEPT","nextNode","push","currentNode","elements","element","$d3863c46a17e8a28$var$isHidden","upTo","getComputedStyle","visibility","undefined","display","parentElement","focus","preventScroll","HTMLInputElement","$d3863c46a17e8a28$var$isSelectableInput","stack","activeFocusScope","$d3863c46a17e8a28$var$arrayRemove","unshift","_stack$","$d3863c46a17e8a28$var$createFocusScopesStack","array","updatedArray","index","indexOf","splice"],"mappings":"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"}