import e from"../../../../../@babel_runtime@7.28.6/node_modules/@babel/runtime/helpers/esm/extends.js";import{forwardRef as t,useState as n,useRef as o,useEffect as r,useCallback as u,createElement as c}from"react";import{useComposedRefs as s}from"../../../../../@radix-ui_react-compose-refs@1.0.0_react@18.3.1/node_modules/@radix-ui/react-compose-refs/dist/index.module.js";import{Primitive as i}from"../../../../../@radix-ui_react-primitive@1_41630aba69d583ccfbdcce925a3bb340/node_modules/@radix-ui/react-primitive/dist/index.module.js";import{useCallbackRef as d}from"../../../../../@radix-ui_react-use-callback-ref@1.0.0_react@18.3.1/node_modules/@radix-ui/react-use-callback-ref/dist/index.module.js";const a="focusScope.autoFocusOnMount",l="focusScope.autoFocusOnUnmount",m={bubbles:!1,cancelable:!0},f=t((t,f)=>{const{loop:E=!1,trapped:_=!1,onMountAutoFocus:T,onUnmountAutoFocus:y,...L}=t,[h,F]=n(null),N=d(T),I=d(y),S=o(null),C=s(f,e=>F(e)),K=o({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r(()=>{if(_){function e(e){if(K.paused||!h)return;const t=e.target;h.contains(t)?S.current=t:b(S.current,{select:!0})}function t(e){!K.paused&&h&&(h.contains(e.relatedTarget)||b(S.current,{select:!0}))}return document.addEventListener("focusin",e),document.addEventListener("focusout",t),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}},[_,h,K.paused]),r(()=>{if(h){x.add(K);const t=document.activeElement;if(!h.contains(t)){const n=new CustomEvent(a,m);h.addEventListener(a,N),h.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(b(o,{select:t}),document.activeElement!==n)return}((e=p(h),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&b(h))}return()=>{h.removeEventListener(a,N),setTimeout(()=>{const e=new CustomEvent(l,m);h.addEventListener(l,I),h.dispatchEvent(e),e.defaultPrevented||b(null!=t?t:document.body,{select:!0}),h.removeEventListener(l,I),x.remove(K)},0)}}var e},[h,N,I,K]);const g=u(e=>{if(!E&&!_)return;if(K.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[o,r]=function(e){const t=p(e),n=v(t,e),o=v(t.reverse(),e);return[n,o]}(t);o&&r?e.shiftKey||n!==r?e.shiftKey&&n===o&&(e.preventDefault(),E&&b(r,{select:!0})):(e.preventDefault(),E&&b(o,{select:!0})):n===t&&e.preventDefault()}},[E,_,K.paused]);return c(i.div,e({tabIndex:-1},L,{ref:C,onKeyDown:g}))});function p(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function v(e,t){for(const n of e)if(!E(n,{upTo:t}))return n}function E(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function b(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const x=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=_(e,t),e.unshift(t)},remove(t){var n;e=_(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function _(e,t){const n=[...e],o=n.indexOf(t);return-1!==o&&n.splice(o,1),n}export{f as FocusScope};
//# sourceMappingURL=index.module.js.map
