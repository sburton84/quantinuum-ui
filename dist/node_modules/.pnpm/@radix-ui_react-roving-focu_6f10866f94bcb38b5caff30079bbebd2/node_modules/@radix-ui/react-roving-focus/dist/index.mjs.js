'use client';
import*as e from"react";import{composeEventHandlers as r}from"../../../../../@radix-ui_primitive@1.1.3/node_modules/@radix-ui/primitive/dist/index.mjs.js";import{createCollection as o}from"../../../../../@radix-ui_react-collection@_4e264787f1cadc3b39e6411b3bc7d186/node_modules/@radix-ui/react-collection/dist/index.mjs.js";import{useComposedRefs as t}from"../../../../../@radix-ui_react-compose-ref_531e21d4c5e41774790b7ade2915befe/node_modules/@radix-ui/react-compose-refs/dist/index.mjs.js";import{createContextScope as n}from"../../../../../@radix-ui_react-context@1.1_013791a088c4fd00402cc5bf12a3fc8d/node_modules/@radix-ui/react-context/dist/index.mjs.js";import{useId as i}from"../../../../../@radix-ui_react-id@1.1.1_@types_react@18.3.28_react@18.3.1/node_modules/@radix-ui/react-id/dist/index.mjs.js";import{Primitive as a}from"../../../../../@radix-ui_react-primitive@2_8827551f88f8a44c5b480e0d8a5a4518/node_modules/@radix-ui/react-primitive/dist/index.mjs.js";import{useCallbackRef as c}from"../../../../../@radix-ui_react-use-callbac_1832c4945613a7ff78753a717fc0f760/node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs.js";import{useControllableState as s}from"../../../../../@radix-ui_react-use-control_0b34401ea70cad34f098c9d931d840c9/node_modules/@radix-ui/react-use-controllable-state/dist/index.mjs.js";import{useDirection as u}from"../../../../../@radix-ui_react-direction@1_73f351a137aa4b3bd8d77f997f719bda/node_modules/@radix-ui/react-direction/dist/index.mjs.js";import{jsx as d}from"react/jsx-runtime";var l="rovingFocusGroup.onEntryFocus",f={bubbles:!1,cancelable:!0},m="RovingFocusGroup",[p,v,b]=o(m),[x,_]=n(m,[b]),[w,g]=x(m),F=e.forwardRef((e,r)=>d(p.Provider,{scope:e.__scopeRovingFocusGroup,children:d(p.Slot,{scope:e.__scopeRovingFocusGroup,children:d(h,{...e,ref:r})})}));F.displayName=m;var h=e.forwardRef((o,n)=>{const{__scopeRovingFocusGroup:i,orientation:p,loop:b=!1,dir:x,currentTabStopId:_,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:F,onEntryFocus:h,preventScrollOnEntryFocus:I=!1,...j}=o,y=e.useRef(null),S=t(n,y),T=u(x),[A,E]=s({prop:_,defaultProp:g??null,onChange:F,caller:m}),[D,C]=e.useState(!1),k=c(h),G=v(i),K=e.useRef(!1),[L,P]=e.useState(0);return e.useEffect(()=>{const e=y.current;if(e)return e.addEventListener(l,k),()=>e.removeEventListener(l,k)},[k]),d(w,{scope:i,orientation:p,dir:T,loop:b,currentTabStopId:A,onItemFocus:e.useCallback(e=>E(e),[E]),onItemShiftTab:e.useCallback(()=>C(!0),[]),onFocusableItemAdd:e.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>P(e=>e-1),[]),children:d(a.div,{tabIndex:D||0===L?-1:0,"data-orientation":p,...j,ref:S,style:{outline:"none",...o.style},onMouseDown:r(o.onMouseDown,()=>{K.current=!0}),onFocus:r(o.onFocus,e=>{const r=!K.current;if(e.target===e.currentTarget&&r&&!D){const r=new CustomEvent(l,f);if(e.currentTarget.dispatchEvent(r),!r.defaultPrevented){const e=G().filter(e=>e.focusable);R([e.find(e=>e.active),e.find(e=>e.id===A),...e].filter(Boolean).map(e=>e.ref.current),I)}}K.current=!1}),onBlur:r(o.onBlur,()=>C(!1))})})}),I="RovingFocusGroupItem",j=e.forwardRef((o,t)=>{const{__scopeRovingFocusGroup:n,focusable:c=!0,active:s=!1,tabStopId:u,children:l,...f}=o,m=i(),b=u||m,x=g(I,n),_=x.currentTabStopId===b,w=v(n),{onFocusableItemAdd:F,onFocusableItemRemove:h,currentTabStopId:j}=x;return e.useEffect(()=>{if(c)return F(),()=>h()},[c,F,h]),d(p.ItemSlot,{scope:n,id:b,focusable:c,active:s,children:d(a.span,{tabIndex:_?0:-1,"data-orientation":x.orientation,...f,ref:t,onMouseDown:r(o.onMouseDown,e=>{c?x.onItemFocus(b):e.preventDefault()}),onFocus:r(o.onFocus,()=>x.onItemFocus(b)),onKeyDown:r(o.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void x.onItemShiftTab();if(e.target!==e.currentTarget)return;const r=function(e,r,o){const t=function(e,r){return"rtl"!==r?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,o);return"vertical"===r&&["ArrowLeft","ArrowRight"].includes(t)||"horizontal"===r&&["ArrowUp","ArrowDown"].includes(t)?void 0:y[t]}(e,x.orientation,x.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=w().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===r)n.reverse();else if("prev"===r||"next"===r){"prev"===r&&n.reverse();const i=n.indexOf(e.currentTarget);n=x.loop?(t=i+1,(o=n).map((e,r)=>o[(t+r)%o.length])):n.slice(i+1)}setTimeout(()=>R(n))}var o,t}),children:"function"==typeof l?l({isCurrentTabStop:_,hasTabStop:null!=j}):l})})});j.displayName=I;var y={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R(e,r=!1){const o=document.activeElement;for(const t of e){if(t===o)return;if(t.focus({preventScroll:r}),document.activeElement!==o)return}}var S=F,T=j;export{T as Item,S as Root,F as RovingFocusGroup,j as RovingFocusGroupItem,_ as createRovingFocusGroupScope};
//# sourceMappingURL=index.mjs.js.map
