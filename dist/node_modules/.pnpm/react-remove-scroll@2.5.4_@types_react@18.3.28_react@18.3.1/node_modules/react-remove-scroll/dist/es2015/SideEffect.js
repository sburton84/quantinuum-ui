import{__spreadArray as e}from"../../../../../tslib@2.8.1/node_modules/tslib/tslib.es6.mjs.js";import*as t from"react";import{RemoveScrollBar as n}from"../../../../../react-remove-scroll-bar@2.3_97976476ea8344d715556744aea43c42/node_modules/react-remove-scroll-bar/dist/es2015/component.js";import{styleSingleton as r}from"../../../../../react-style-singleton@2.2.3_51b1e9d6f4319a1cc9e00cf8d32b9d74/node_modules/react-style-singleton/dist/es2015/component.js";import{nonPassive as c}from"./aggresiveCapture.js";import{locationCouldBeScrolled as o,handleScroll as a}from"./handleScroll.js";var u=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},i=function(e){return[e.deltaX,e.deltaY]},l=function(e){return e&&"current"in e?e.current:e},s=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},f=0,d=[];function m(m){var v=t.useRef([]),h=t.useRef([0,0]),p=t.useRef(),g=t.useState(f++)[0],b=t.useState(function(){return r()})[0],y=t.useRef(m);t.useEffect(function(){y.current=m},[m]),t.useEffect(function(){if(m.inert){document.body.classList.add("block-interactivity-".concat(g));var t=e([m.lockRef.current],(m.shards||[]).map(l),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(g))}),function(){document.body.classList.remove("block-interactivity-".concat(g)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(g))})}}},[m.inert,m.lockRef.current,m.shards]);var k=t.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!y.current.allowPinchZoom;var n,r=u(e),c=h.current,i="deltaX"in e?e.deltaX:c[0]-r[0],l="deltaY"in e?e.deltaY:c[1]-r[1],s=e.target,f=Math.abs(i)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===f&&"range"===s.type)return!1;var d=o(f,s);if(!d)return!0;if(d?n=f:(n="v"===f?"h":"v",d=o(f,s)),!d)return!1;if(!p.current&&"changedTouches"in e&&(i||l)&&(p.current=n),!n)return!0;var m=p.current||n;return a(m,t,e,"h"===m?i:l,!0)},[]),E=t.useCallback(function(e){var t=e;if(d.length&&d[d.length-1]===b){var n="deltaY"in t?i(t):u(t),r=v.current.filter(function(e){return e.name===t.type&&e.target===t.target&&(r=e.delta,c=n,r[0]===c[0]&&r[1]===c[1]);var r,c})[0];if(r&&r.should)t.preventDefault();else if(!r){var c=(y.current.shards||[]).map(l).filter(Boolean).filter(function(e){return e.contains(t.target)});(c.length>0?k(t,c[0]):!y.current.noIsolation)&&t.preventDefault()}}},[]),C=t.useCallback(function(e,t,n,r){var c={name:e,delta:t,target:n,should:r};v.current.push(c),setTimeout(function(){v.current=v.current.filter(function(e){return e!==c})},1)},[]),L=t.useCallback(function(e){h.current=u(e),p.current=void 0},[]),R=t.useCallback(function(e){C(e.type,i(e),e.target,k(e,m.lockRef.current))},[]),j=t.useCallback(function(e){C(e.type,u(e),e.target,k(e,m.lockRef.current))},[]);t.useEffect(function(){return d.push(b),m.setCallbacks({onScrollCapture:R,onWheelCapture:R,onTouchMoveCapture:j}),document.addEventListener("wheel",E,c),document.addEventListener("touchmove",E,c),document.addEventListener("touchstart",L,c),function(){d=d.filter(function(e){return e!==b}),document.removeEventListener("wheel",E,c),document.removeEventListener("touchmove",E,c),document.removeEventListener("touchstart",L,c)}},[]);var w=m.removeScrollBar,T=m.inert;return t.createElement(t.Fragment,null,T?t.createElement(b,{styles:s(g)}):null,w?t.createElement(n,{gapMode:"margin"}):null)}export{m as RemoveScrollSideCar,i as getDeltaXY,u as getTouchXY};
//# sourceMappingURL=SideEffect.js.map
