'use client';
import*as e from"react";import{createContextScope as r}from"../../../../../@radix-ui_react-context@1.1_9551269e96efb8b70cc80f17ad6b3bcb/node_modules/@radix-ui/react-context/dist/index.mjs.js";import{useCallbackRef as a}from"../../../../../@radix-ui_react-use-callbac_1832c4945613a7ff78753a717fc0f760/node_modules/@radix-ui/react-use-callback-ref/dist/index.mjs.js";import{useLayoutEffect as t}from"../../../../../@radix-ui_react-use-layout-_8bc1cedb8d6b3b9d145ef7c7645ac4ee/node_modules/@radix-ui/react-use-layout-effect/dist/index.mjs.js";import{Primitive as i}from"../../../../../@radix-ui_react-primitive@2_be93e2873c2be441aa6fe1469ec0005c/node_modules/@radix-ui/react-primitive/dist/index.mjs.js";import{useIsHydrated as o}from"../../../../../@radix-ui_react-use-is-hydr_07ed8df09e61ec6845a23b68cd5dff91/node_modules/@radix-ui/react-use-is-hydrated/dist/index.mjs.js";import{jsx as d}from"react/jsx-runtime";var s="Avatar",[n,c]=r(s),[u,f]=n(s),m=e.forwardRef((r,a)=>{const{__scopeAvatar:t,...o}=r,[s,n]=e.useState("idle");return d(u,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:n,children:d(i.span,{...o,ref:a})})});m.displayName=s;var l="AvatarImage",p=e.forwardRef((r,s)=>{const{__scopeAvatar:n,src:c,onLoadingStatusChange:u=()=>{},...m}=r,p=f(l,n),_=function(r,{referrerPolicy:a,crossOrigin:i}){const d=o(),s=e.useRef(null),n=d?(s.current||(s.current=new window.Image),s.current):null,[c,u]=e.useState(()=>g(n,r));return t(()=>{u(g(n,r))},[n,r]),t(()=>{const e=e=>()=>{u(e)};if(!n)return;const r=e("loaded"),t=e("error");return n.addEventListener("load",r),n.addEventListener("error",t),a&&(n.referrerPolicy=a),"string"==typeof i&&(n.crossOrigin=i),()=>{n.removeEventListener("load",r),n.removeEventListener("error",t)}},[n,i,a]),c}(c,m),v=a(e=>{u(e),p.onImageLoadingStatusChange(e)});return t(()=>{"idle"!==_&&v(_)},[_,v]),"loaded"===_?d(i.img,{...m,ref:s,src:c}):null});p.displayName=l;var _="AvatarFallback",v=e.forwardRef((r,a)=>{const{__scopeAvatar:t,delayMs:o,...s}=r,n=f(_,t),[c,u]=e.useState(void 0===o);return e.useEffect(()=>{if(void 0!==o){const e=window.setTimeout(()=>u(!0),o);return()=>window.clearTimeout(e)}},[o]),c&&"loaded"!==n.imageLoadingStatus?d(i.span,{...s,ref:a}):null});function g(e,r){return e?r?(e.src!==r&&(e.src=r),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}v.displayName=_;var x=m,b=p,y=v;export{m as Avatar,v as AvatarFallback,p as AvatarImage,y as Fallback,b as Image,x as Root,c as createAvatarScope};
//# sourceMappingURL=index.mjs.js.map
