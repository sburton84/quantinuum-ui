var e=new WeakMap,r=new WeakMap,n={},t=0,a=function(e){return e&&(e.host||a(e.parentNode))},o=function(o,i,u,c){var s=function(e,r){return r.map(function(r){if(e.contains(r))return r;var n=a(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(i,Array.isArray(o)?o:[o]);n[u]||(n[u]=new WeakMap);var f=n[u],l=[],d=new Set,p=new Set(s),h=function(e){e&&!d.has(e)&&(d.add(e),h(e.parentNode))};s.forEach(h);var y=function(n){n&&!p.has(n)&&Array.prototype.forEach.call(n.children,function(n){if(d.has(n))y(n);else try{var t=n.getAttribute(c),a=null!==t&&"false"!==t,o=(e.get(n)||0)+1,i=(f.get(n)||0)+1;e.set(n,o),f.set(n,i),l.push(n),1===o&&a&&r.set(n,!0),1===i&&n.setAttribute(u,"true"),a||n.setAttribute(c,"true")}catch(e){console.error("aria-hidden: cannot operate on ",n,e)}})};return y(i),d.clear(),t++,function(){l.forEach(function(n){var t=e.get(n)-1,a=f.get(n)-1;e.set(n,t),f.set(n,a),t||(r.has(n)||n.removeAttribute(c),r.delete(n)),a||n.removeAttribute(u)}),--t||(e=new WeakMap,e=new WeakMap,r=new WeakMap,n={})}},i=function(e,r,n){void 0===n&&(n="data-aria-hidden");var t=Array.from(Array.isArray(e)?e:[e]),a=r||function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(t.push.apply(t,Array.from(a.querySelectorAll("[aria-live], script"))),o(t,a,n,"aria-hidden")):function(){return null}};export{i as hideOthers};
//# sourceMappingURL=index.js.map
